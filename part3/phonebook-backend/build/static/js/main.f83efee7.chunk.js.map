{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","filter","onFilterChange","value","onChange","PersonForm","onFormSubmit","onNameChange","nameValue","onNumberChange","numberValue","onSubmit","type","Person","person","handleDelete","key","name","number","onClick","id","Persons","persons","toLowerCase","includes","map","filteredPerson","Notification","successMessage","errorMessage","className","baseUrl","axios","get","then","res","data","newObject","post","put","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setSuccessMessage","setErrorMessage","useEffect","personService","allPersons","catch","err","alert","e","target","preventDefault","existingPerson","find","window","confirm","changedPerson","returnedPerson","setTimeout","p","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f83efee7.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Filter({ filter, onFilterChange }) {\r\n  return (\r\n    <div>\r\n      Filter shown with <input value={filter} onChange={onFilterChange} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nfunction PersonForm({\r\n  onFormSubmit,\r\n  onNameChange,\r\n  nameValue,\r\n  onNumberChange,\r\n  numberValue,\r\n}) {\r\n  return (\r\n    <form onSubmit={onFormSubmit}>\r\n      <h2>Add a new</h2>\r\n      <div>\r\n        Name: <input onChange={onNameChange} value={nameValue} />\r\n      </div>\r\n      <div>\r\n        Number: <input onChange={onNumberChange} value={numberValue} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nfunction Person({ person, handleDelete }) {\r\n  return (\r\n    <p key={person.name}>\r\n      {person.name} {person.number}\r\n      &nbsp;<button onClick={() => handleDelete(person.id)}>Delete</button>\r\n    </p>\r\n  );\r\n}\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nfunction Persons({ persons, filter, handleDelete }) {\r\n  return (\r\n    <div>\r\n      {persons\r\n        .filter((person) =>\r\n          person.name.toLowerCase().includes(filter.toLowerCase())\r\n        )\r\n        .map((filteredPerson) => (\r\n          <Person\r\n            key={filteredPerson.name}\r\n            person={filteredPerson}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ successMessage, errorMessage }) => {\r\n  if (!successMessage && !errorMessage) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`message ${successMessage ? \"success\" : \"error\"}`}>\r\n      {successMessage ? successMessage : errorMessage}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const req = axios.get(`${baseUrl}`);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const req = axios.post(`${baseUrl}`, newObject);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const req = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const req = axios.delete(`${baseUrl}/${id}`);\r\n  return req.then((res) => res.data);\r\n};\r\n// if (condition) {\r\n  \r\n// } else if(true) {\r\n  \r\n// }\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Notification from \"./components/Notification\";\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then((allPersons) => {\r\n        setPersons(allPersons);\r\n      })\r\n      .catch((err) => alert(err));\r\n  }, []);\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (e) => {\r\n    setFilter(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!newName || !newNumber) {\r\n      alert(\"Please fill in the fields\");\r\n      return;\r\n    }\r\n\r\n    // Person exists in the database\r\n    const existingPerson = persons.find(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    if (existingPerson && existingPerson.number === newNumber) {\r\n      alert(`${newName} is already added to phonebook`);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      return;\r\n    }\r\n\r\n    // Change number for exiting person in database\r\n    if (existingPerson && existingPerson.number !== newNumber) {\r\n      if (\r\n        window.confirm(\r\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        const changedPerson = { ...existingPerson, number: newNumber };\r\n        const id = existingPerson.id;\r\n\r\n        personService\r\n          .update(id, changedPerson)\r\n          .then((returnedPerson) => {\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== id ? person : returnedPerson\r\n              )\r\n            );\r\n            setSuccessMessage(`Updated ${changedPerson.name}'s number`);\r\n            setTimeout(() => {\r\n              setSuccessMessage(null);\r\n            }, 5000);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n          })\r\n          .catch((err) => {\r\n            setErrorMessage(\r\n              `Information of ${changedPerson.name} has already been removed from server`\r\n            );\r\n            setTimeout(() => {\r\n              setErrorMessage(null);\r\n            }, 5000);\r\n            setPersons(persons.filter((p) => p.id !== id));\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n          });\r\n        return;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Create new person & send to database\r\n    const newPerson = { name: newName, number: newNumber };\r\n    personService\r\n      .create(newPerson)\r\n      .then((returnedPerson) => {\r\n        setPersons(persons.concat(returnedPerson));\r\n        setSuccessMessage(`Added ${returnedPerson.name}`);\r\n        setTimeout(() => {\r\n          setSuccessMessage(null);\r\n        }, 5000);\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      .catch((err) => alert(err));\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    if (window.confirm(\"Do you really want to delete this person\")) {\r\n      personService\r\n        .remove(id)\r\n        .then((returnedPerson) => {\r\n          setPersons(persons.filter((person) => person.id !== id));\r\n        })\r\n        .catch((err) => alert(err));\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification\r\n        successMessage={successMessage}\r\n        errorMessage={errorMessage}\r\n      />\r\n      <Filter filter={filter} onFilterChange={handleFilterChange} />\r\n      <PersonForm\r\n        onFormSubmit={handleSubmit}\r\n        onNameChange={handleNameChange}\r\n        onNumberChange={handleNumberChange}\r\n        nameValue={newName}\r\n        numberValue={newNumber}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filter={filter} handleDelete={handleDelete} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}